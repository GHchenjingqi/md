import{u as _,e as te,f as ae,g as U,h as le,P as se,i as ue,j as ie,k as Q,l as D,m as re,w as M,n as a,p as ne,R as P,q as oe,s as ce,v as Ee,C as ve,x as de,y as he,z as pe,A as me,B as Be,D as Ae,E as ye,F as O,G as $,H as ge,I as H,J as Fe}from"./app-DFbXBJNa.js";const Se=["/about.html","/","/guide/","/guide/http/http%E9%9D%A2%E8%AF%95%E9%A2%98.html","/guide/css/css%E5%8D%95%E4%BD%8D.html","/guide/Electron/Electron-js.html","/guide/java/java%E5%9F%BA%E7%A1%80.html","/guide/java/JFrame%E7%B1%BB.html","/guide/java/Scanner%E7%B1%BB.html","/guide/JavaScript/ajax%E8%AF%B7%E6%B1%82.html","/guide/JavaScript/array.html","/guide/JavaScript/canvas.html","/guide/JavaScript/css%20clip.html","/guide/JavaScript/ES%E6%96%B0%E7%89%B9%E6%80%A7.html","/guide/JavaScript/JS%E6%A8%A1%E5%9D%97%E5%8C%96.html","/guide/JavaScript/PostMessage%E4%BD%BF%E7%94%A8.html","/guide/JavaScript/WebSocket%E4%BD%BF%E7%94%A8.html","/guide/JavaScript/Worker%E7%BA%BF%E7%A8%8B%E4%BD%BF%E7%94%A8.html","/guide/JavaScript/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF.html","/guide/JavaScript/%E5%AF%B9%E8%B1%A1%E6%8F%8F%E8%BF%B0%E7%AC%A6.html","/guide/JavaScript/%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86.html","/guide/JavaScript/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8.html","/guide/JavaScript/%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html","/guide/JavaScript/%E9%9D%A2%E8%AF%95%E9%A2%98.html","/guide/mysql/sql%E5%91%BD%E4%BB%A4.html","/guide/mysql/sql%E5%9F%BA%E7%A1%80.html","/guide/npm/cmd%E5%91%BD%E4%BB%A4.html","/guide/npm/npm%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html","/guide/TypeScript/tsconfig.json%E8%AF%B4%E6%98%8E.html","/guide/TypeScript/TS%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BC%98%E5%8A%BF.html","/guide/TypeScript/TS%E7%9A%84%E5%AF%B9%E8%B1%A1.html","/guide/TypeScript/TS%E7%B1%BB%E5%9E%8B.html","/guide/TypeScript/TS%E9%9D%A2%E8%AF%95%E9%A2%98.html","/guide/vue/Axios.html","/guide/vue/Pinia%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86.html","/guide/vue/Router%E8%B7%AF%E7%94%B1.html","/guide/vue/vue2%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81.html","/guide/vue/vue3%E5%AE%9E%E6%88%98%E8%AE%B0%E5%BD%95.html","/guide/vue/vue3%E8%AF%AD%E6%B3%95.html","/guide/vue/vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86.html","/guide/vue/vue%E9%9D%A2%E8%AF%95%E9%A2%98.html","/guide/vue/webpack%E6%89%93%E5%8C%85.html","/guide/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8F%91%E5%B8%83.html","/guide/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F.html","/404.html"],fe="SEARCH_PRO_QUERY_HISTORY",B=_(fe,[]),De=()=>{const{queryHistoryCount:l}=H,s=l>0;return{enabled:s,queryHistory:B,addQueryHistory:u=>{s&&(B.value=Array.from(new Set([u,...B.value.slice(0,l-1)])))},removeQueryHistory:u=>{B.value=[...B.value.slice(0,u),...B.value.slice(u+1)]}}},T=l=>Se[l.id]+("anchor"in l?`#${l.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=H,A=_(He,[]),Re=()=>{const l=I>0;return{enabled:l,resultHistory:A,addResultHistory:s=>{if(l){const u={link:T(s),display:s.display};"header"in s&&(u.header=s.header),A.value=[u,...A.value.slice(0,I-1)]}},removeResultHistory:s=>{A.value=[...A.value.slice(0,s),...A.value.slice(s+1)]}}},ke=l=>{const s=ve(),u=U(),R=de(),r=Q(0),F=D(()=>r.value>0),h=he([]);return pe(()=>{const{search:p,terminate:k}=me(),y=ge(c=>{const g=c.join(" "),{searchFilter:q=d=>d,splitWord:w,suggestionsFilter:j,...m}=s.value;g?(r.value+=1,p(c.join(" "),u.value,m).then(d=>q(d,g,u.value,R.value)).then(d=>{r.value-=1,h.value=d}).catch(d=>{console.warn(d),r.value-=1,r.value||(h.value=[])})):h.value=[]},H.searchDelay-H.suggestDelay);M([l,u],([c])=>y(c),{immediate:!0}),Be(()=>{k()})}),{isSearching:F,results:h}};var we=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:s}){const u=ae(),R=U(),r=le(se),{enabled:F,addQueryHistory:h,queryHistory:p,removeQueryHistory:k}=De(),{enabled:y,resultHistory:c,addResultHistory:g,removeResultHistory:q}=Re(),w=F||y,j=ue(l,"queries"),{results:m,isSearching:d}=ke(j),i=ie({isQuery:!0,index:0}),E=Q(0),v=Q(0),b=D(()=>w&&(p.value.length>0||c.value.length>0)),x=D(()=>m.value.length>0),J=D(()=>m.value[E.value]||null),Y=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?c.value.length-1:p.value.length-1):i.index=t-1},W=()=>{const{isQuery:e,index:t}=i;t===(e?p.value.length-1:c.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},z=()=>{E.value=E.value>0?E.value-1:m.value.length-1,v.value=J.value.contents.length-1},G=()=>{E.value=E.value<m.value.length-1?E.value+1:0,v.value=0},V=()=>{v.value<J.value.contents.length-1?v.value+=1:G()},K=()=>{v.value>0?v.value-=1:z()},C=e=>e.map(t=>Fe(t)?t:a(t[0],t[1])),N=e=>{if(e.type==="customField"){const t=Ae[e.index]||"$content",[n,f=""]=ye(t)?t[R.value].split("$content"):t.split("$content");return e.display.map(o=>a("div",C([n,...o,f])))}return e.display.map(t=>a("div",C(t)))},S=()=>{E.value=0,v.value=0,s("updateQuery",""),s("close")},X=()=>F?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},r.value.queryHistory),p.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{s("updateQuery",e)}},[a(O,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),k(t)}})]))])):null,Z=()=>y?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},r.value.resultHistory),c.value.map((e,t)=>a(P,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{S()}},()=>[a(O,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(n=>C(n)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),q(t)}})]))])):null;return re("keydown",e=>{if(l.isFocusing){if(x.value){if(e.key==="ArrowUp")K();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=J.value.contents[v.value];h(l.queries.join(" ")),g(t),u.push(T(t)),S()}}else if(y){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(s("updateQuery",p.value[t]),e.preventDefault()):(u.push(c.value[t].link),S())}}}}),M([E,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!x.value:!b.value}],id:"search-pro-results"},l.queries.length?d.value?a(ne,{hint:r.value.searching}):x.value?a("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:t},n)=>{const f=E.value===n;return a("li",{class:["search-pro-result-list-item",{active:f}]},[a("div",{class:"search-pro-result-title"},e||r.value.defaultTitle),t.map((o,ee)=>{const L=f&&v.value===ee;return a(P,{to:T(o),class:["search-pro-result-item",{active:L,"aria-selected":L}],onClick:()=>{h(l.queries.join(" ")),g(o),S()}},()=>[o.type==="text"?null:a(o.type==="title"?oe:o.type==="heading"?ce:Ee,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?a("div",{class:"content-header"},o.header):null,a("div",N(o))])])})])})):r.value.emptyResult:w?b.value?[X(),Z()]:r.value.emptyHistory:r.value.emptyResult)}});export{we as default};
