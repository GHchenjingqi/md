<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="stylesheet" href="/md/css/index.css"><title>知识库</title><meta name="description" content="陈小知&QUX · 前端笔记">
    <link rel="preload" href="/md/assets/style-D3I1LDHg.css" as="style"><link rel="stylesheet" href="/md/assets/style-D3I1LDHg.css">
    <link rel="modulepreload" href="/md/assets/app-Bq68UBLY.js"><link rel="modulepreload" href="/md/assets/高德地图api.html-BoWdYq9M.js">
    <link rel="prefetch" href="/md/assets/knows.html-7qrzSTTL.js" as="script"><link rel="prefetch" href="/md/assets/index.html-CE00C3p9.js" as="script"><link rel="prefetch" href="/md/assets/ajax基础及封装.html-BiR7S26K.js" as="script"><link rel="prefetch" href="/md/assets/array.html-CdGkFq9d.js" as="script"><link rel="prefetch" href="/md/assets/audio音频可视化.html-C4hhrkiM.js" as="script"><link rel="prefetch" href="/md/assets/axios基础及封装.html-BVzgsNHB.js" as="script"><link rel="prefetch" href="/md/assets/blender 快捷键.html-Cb8COKz6.js" as="script"><link rel="prefetch" href="/md/assets/cannonjs物理碰撞.html-BAiWEbbU.js" as="script"><link rel="prefetch" href="/md/assets/canvas.html-Drc-CcsD.js" as="script"><link rel="prefetch" href="/md/assets/CSS媒体@media查询.html-BdM8bOlJ.js" as="script"><link rel="prefetch" href="/md/assets/CSS巧技.html-B2CpUZ1f.js" as="script"><link rel="prefetch" href="/md/assets/docker使用.html-BHLdlku4.js" as="script"><link rel="prefetch" href="/md/assets/echarts 在vue中案例.html-BC5nbaL-.js" as="script"><link rel="prefetch" href="/md/assets/echart使用技巧.html-Cx22f2pa.js" as="script"><link rel="prefetch" href="/md/assets/Electron-js.html-BOmAgj3t.js" as="script"><link rel="prefetch" href="/md/assets/electron桌面应用.html-DpFQnLGE.js" as="script"><link rel="prefetch" href="/md/assets/ES新特性.html-X9ILsXmK.js" as="script"><link rel="prefetch" href="/md/assets/express搭建.html-BggwV9c-.js" as="script"><link rel="prefetch" href="/md/assets/Flutter语法知识.html-CYQuKePH.js" as="script"><link rel="prefetch" href="/md/assets/GUI.js 使用.html-BQz5K-IN.js" as="script"><link rel="prefetch" href="/md/assets/hammerjs 手势插件.html-eyKzyAXp.js" as="script"><link rel="prefetch" href="/md/assets/http面试题.html-DZBKzCH_.js" as="script"><link rel="prefetch" href="/md/assets/IntersectionObserver重叠观察器.html-D0NBsA-z.js" as="script"><link rel="prefetch" href="/md/assets/java基础.html-aRveFgw5.js" as="script"><link rel="prefetch" href="/md/assets/JS模块化.html-DH-VGDsJ.js" as="script"><link rel="prefetch" href="/md/assets/live-server.html-KOmKWk2J.js" as="script"><link rel="prefetch" href="/md/assets/npm常用命令.html-hvnGUVHi.js" as="script"><link rel="prefetch" href="/md/assets/Nuxtjs使用.html-BHe7Xxez.js" as="script"><link rel="prefetch" href="/md/assets/onlyoffice8.0插件开发.html-Cnj1lnsV.js" as="script"><link rel="prefetch" href="/md/assets/Pinia状态管理.html-DcYHofYp.js" as="script"><link rel="prefetch" href="/md/assets/PostMessage使用.html-KtbnE8cg.js" as="script"><link rel="prefetch" href="/md/assets/PWA 离线桌面应用.html-JZYbNzhq.js" as="script"><link rel="prefetch" href="/md/assets/python爬虫.html-CaH5dE_T.js" as="script"><link rel="prefetch" href="/md/assets/React入门.html-WQ7Wnpi7.js" as="script"><link rel="prefetch" href="/md/assets/Rollup打包.html-Dd1asWM5.js" as="script"><link rel="prefetch" href="/md/assets/Router路由.html-CiEREmRA.js" as="script"><link rel="prefetch" href="/md/assets/Scanner类.html-Di_qTOPi.js" as="script"><link rel="prefetch" href="/md/assets/sql命令.html-CG5T0d2w.js" as="script"><link rel="prefetch" href="/md/assets/sql基础.html-BkvmDGuf.js" as="script"><link rel="prefetch" href="/md/assets/Svg及svg运动.html-DX9dDRPh.js" as="script"><link rel="prefetch" href="/md/assets/threeJS 入门.html-kbn0zg96.js" as="script"><link rel="prefetch" href="/md/assets/TS面试题.html-DbOMPpDK.js" as="script"><link rel="prefetch" href="/md/assets/TypeScript教程.html-CYHIG9xE.js" as="script"><link rel="prefetch" href="/md/assets/vue2手撕源码.html-BVZjODXj.js" as="script"><link rel="prefetch" href="/md/assets/vue2项目自定义指令使用案例-按钮鉴权功能.html-w6rwQPOF.js" as="script"><link rel="prefetch" href="/md/assets/vue3安装与使用.html-_I3vWFoP.js" as="script"><link rel="prefetch" href="/md/assets/vue3实战记录.html-BW8H-DKC.js" as="script"><link rel="prefetch" href="/md/assets/vue3语法.html-sCfLWmz-.js" as="script"><link rel="prefetch" href="/md/assets/VuePress使用.html-Bkl48N6R.js" as="script"><link rel="prefetch" href="/md/assets/vuex状态管理.html-hK7P6gUy.js" as="script"><link rel="prefetch" href="/md/assets/vue面试题.html-CvYFChPP.js" as="script"><link rel="prefetch" href="/md/assets/Web Speech API 前端TTS 语音识别和语言合成.html-CiVKlBIm.js" as="script"><link rel="prefetch" href="/md/assets/WebGL.html-I0XYE12O.js" as="script"><link rel="prefetch" href="/md/assets/webpack打包.html-CikBaLNc.js" as="script"><link rel="prefetch" href="/md/assets/WebSocket使用.html-Bq0BA8vm.js" as="script"><link rel="prefetch" href="/md/assets/wordpress数据库.html-dxpiGpKo.js" as="script"><link rel="prefetch" href="/md/assets/Worker线程使用.html-CVSRToRz.js" as="script"><link rel="prefetch" href="/md/assets/《产品经理方法论》笔记.html-CufhoNHk.js" as="script"><link rel="prefetch" href="/md/assets/事件循环.html-DKaby8Lk.js" as="script"><link rel="prefetch" href="/md/assets/前端混合模式.html-BbieV7bq.js" as="script"><link rel="prefetch" href="/md/assets/对象描述符.html-Dj1wwOu6.js" as="script"><link rel="prefetch" href="/md/assets/小程序发布.html-jWX035Mf.js" as="script"><link rel="prefetch" href="/md/assets/常用算法.html-hkxOZx4Q.js" as="script"><link rel="prefetch" href="/md/assets/微信小程序.html-CaW4UxZK.js" as="script"><link rel="prefetch" href="/md/assets/打包工具.html-BUpwNJcq.js" as="script"><link rel="prefetch" href="/md/assets/渲染原理.html-BV0Ip-Fz.js" as="script"><link rel="prefetch" href="/md/assets/着色器shader入门.html-DJaeUWUL.js" as="script"><link rel="prefetch" href="/md/assets/知识点补充.html-SXdeXWX6.js" as="script"><link rel="prefetch" href="/md/assets/网络安全.html-Cyat_whH.js" as="script"><link rel="prefetch" href="/md/assets/跨域解决方案.html-jB54OwlD.js" as="script"><link rel="prefetch" href="/md/assets/键盘事件及其属性.html-cygGF2iH.js" as="script"><link rel="prefetch" href="/md/assets/面试题.html-CxGrlICo.js" as="script"><link rel="prefetch" href="/md/assets/404.html-CwvmjYVm.js" as="script"><link rel="prefetch" href="/md/assets/SearchResult-BrqQxAAX.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/md/"><img class="vp-site-logo" src="/md/assets/img/logo.png" alt="知识库"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">知识库</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/md/" aria-label="主页"><!--[--><!--[--><!--]--><!--]-->主页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/md/knows.html" aria-label="知识库"><!--[--><!--[--><!--]--><!--]-->知识库<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://ghchenjingqi.github.io/home/" aria-label="GitHOME" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHOME<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/GHchenjingqi" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="slimsearch-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">Search</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/md/" aria-label="主页"><!--[--><!--[--><!--]--><!--]-->主页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/md/knows.html" aria-label="知识库"><!--[--><!--[--><!--]--><!--]-->知识库<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://ghchenjingqi.github.io/home/" aria-label="GitHOME" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHOME<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/GHchenjingqi" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><p>官方地址：<a href="https://lbs.amap.com/api/javascript-api-v2/summary" target="_blank" rel="noopener noreferrer">https://lbs.amap.com/api/javascript-api-v2/summary</a></p><h2 id="创建地图实例" tabindex="-1"><a class="header-anchor" href="#创建地图实例"><span>创建地图实例</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token string">&quot;id元素&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 默认使用 2D 模式，如果希望使用带有俯仰角的 3D 模式，请设置 viewMode: &#39;3D&#39;</span></span>
<span class="line">  <span class="token literal-property property">viewMode</span><span class="token operator">:</span><span class="token string">&quot;2D&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token comment">// 初始化地图层级，地图缩放比例，数字越大，显示地图越小，越小显示地图越大</span></span>
<span class="line">  <span class="token literal-property property">zoom</span><span class="token operator">:</span><span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token comment">// 初始化地图中心点</span></span>
<span class="line">  <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">116.397428</span><span class="token punctuation">,</span> <span class="token number">39.90923</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> </span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 是否监控地图容器尺寸变化</span></span>
<span class="line">  <span class="token literal-property property">resizeEnable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 是否在有矢量底图的时候自动展示室内地图，PC默认true,移动端默认false</span></span>
<span class="line">  <span class="token literal-property property">showIndoorMap</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 地图是否可通过鼠标拖拽平移，默认为true</span></span>
<span class="line">  <span class="token literal-property property">dragEnable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 地图是否可通过键盘控制(上下左右），默认为true</span></span>
<span class="line">  <span class="token literal-property property">keyboardEnable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 地图是否可通过双击鼠标放大地图，默认为true</span></span>
<span class="line">  <span class="token literal-property property">doubleClickZoom</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 地图是否可缩放，默认值为true</span></span>
<span class="line">  <span class="token literal-property property">zoomEnable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 地图是否可旋转，3D视图默认为true，2D视图默认false</span></span>
<span class="line">  <span class="token literal-property property">rotateEnable</span><span class="token operator">:</span> <span class="token boolean">false</span>，3D视图默认为<span class="token boolean">true</span>，2D视图默认<span class="token boolean">false</span></span>
<span class="line">    <span class="token comment">// 地图是否可倾斜</span></span>
<span class="line">    <span class="token literal-property property">pitchEnable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 是否展示地图的热点（鼠标经过商家显示商家信息）</span></span>
<span class="line">  <span class="token literal-property property">isHotspot</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 3D y轴角度</span></span>
<span class="line">  <span class="token literal-property property">pitch</span><span class="token operator">:</span><span class="token number">90</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 不显示地图文字标记</span></span>
<span class="line">  <span class="token literal-property property">showLabel</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 初始地图是否展示地形,3D使用	</span></span>
<span class="line">  <span class="token literal-property property">terrain</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="地图插件-plugin-使用" tabindex="-1"><a class="header-anchor" href="#地图插件-plugin-使用"><span>地图插件 plugin 使用</span></a></h3><p>插件有2种使用方法，第一种使用回调式：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">&#39;AMap.Driving&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> driving <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Driving</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 驾车路线规划策略，AMap.DrivingPolicy.LEAST_TIME是最快捷模式</span></span>
<span class="line">    <span class="token literal-property property">policy</span><span class="token operator">:</span> AMap<span class="token punctuation">.</span>DrivingPolicy<span class="token punctuation">.</span><span class="token constant">LEAST_TIME</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  </span>
<span class="line">  <span class="token keyword">var</span> startLngLat <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">116.379028</span><span class="token punctuation">,</span> <span class="token number">39.865042</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token keyword">var</span> endLngLat <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">116.427281</span><span class="token punctuation">,</span> <span class="token number">39.903719</span><span class="token punctuation">]</span></span>
<span class="line">  </span>
<span class="line">  driving<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>startLngLat<span class="token punctuation">,</span> endLngLat<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 未出错时，result即是对应的路线规划方案</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二种，全局式写法</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 全局注册插件 AMap.Driving</span></span>
<span class="line">Amap <span class="token operator">=</span> <span class="token keyword">await</span> AMapLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">key</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_AMAP_KEY</span><span class="token punctuation">,</span> <span class="token comment">// 申请好的Web端开发者Key，首次调用 load 时必填</span></span>
<span class="line">  <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&#39;2.0&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;AMap.Driving&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 需要使用的的插件列表，如比例尺&#39;AMap.Scale&#39;等</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用插件</span></span>
<span class="line"><span class="token keyword">const</span> ridingOption <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">map</span><span class="token operator">:</span> map<span class="token punctuation">,</span>  <span class="token comment">// 关联map实例</span></span>
<span class="line">  <span class="token literal-property property">panel</span><span class="token operator">:</span> <span class="token string">&quot;panel&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 路线绘制div的id</span></span>
<span class="line">  <span class="token literal-property property">policy</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">hideMarkers</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 隐藏标记</span></span>
<span class="line">  <span class="token literal-property property">isOutline</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否显示路线外框</span></span>
<span class="line">  <span class="token literal-property property">outlineColor</span><span class="token operator">:</span> <span class="token string">&#39;#ffeeee&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 路线颜色</span></span>
<span class="line">  <span class="token literal-property property">autoFitView</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 自动适应视图</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> riding <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Driving</span><span class="token punctuation">(</span>ridingOption<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//根据起终点坐标规划行车路线路线</span></span>
<span class="line">riding<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">117.089746</span><span class="token punctuation">,</span><span class="token number">36.582442</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">117.102489</span><span class="token punctuation">,</span><span class="token number">36.551805</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">&#39;complete&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;路线数据查询成功&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;路线数据查询失败&#39;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实例事件及常用方法" tabindex="-1"><a class="header-anchor" href="#实例事件及常用方法"><span>实例事件及常用方法</span></a></h2><h3 id="一-添加元素-图层-控件到地图上-add" tabindex="-1"><a class="header-anchor" href="#一-添加元素-图层-控件到地图上-add"><span>一.添加元素/图层/控件到地图上 add</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 添加单个</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>labelsLayer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 添加多个</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span>labelsLayer<span class="token punctuation">,</span>two<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二-地图元素-图层-控件删除-remove" tabindex="-1"><a class="header-anchor" href="#二-地图元素-图层-控件删除-remove"><span>二.地图元素/图层/控件删除 remove</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>labelsLayer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="三-注册事件-on" tabindex="-1"><a class="header-anchor" href="#三-注册事件-on"><span>三.注册事件 - on</span></a></h3><h4 id="_1-加载完成-complete" tabindex="-1"><a class="header-anchor" href="#_1-加载完成-complete"><span>1.加载完成 complete</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;complete&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  log<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;地图加载完成！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-移动-moveend" tabindex="-1"><a class="header-anchor" href="#_2-移动-moveend"><span>2.移动 moveend</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;moveend&#39;</span><span class="token punctuation">,</span> 回调函数<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-缩放-zoomend" tabindex="-1"><a class="header-anchor" href="#_3-缩放-zoomend"><span>3.缩放 zoomend</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;zoomend&#39;</span><span class="token punctuation">,</span> 回调函数<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_4-点击-click" tabindex="-1"><a class="header-anchor" href="#_4-点击-click"><span>4.点击 click</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// e点击位置信息</span></span>
<span class="line">  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;lnglat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> e<span class="token punctuation">.</span>lnglat<span class="token punctuation">.</span><span class="token function">getLng</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;,&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>lnglat<span class="token punctuation">.</span><span class="token function">getLat</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-热点经过事件-hotspotover" tabindex="-1"><a class="header-anchor" href="#_5-热点经过事件-hotspotover"><span>5.热点经过事件 hotspotover</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;hotspotover&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  placeSearch<span class="token punctuation">.</span><span class="token function">getDetails</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">&#39;complete&#39;</span> <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span>info <span class="token operator">===</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">placeSearch_CallBack</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四-移除事件-off" tabindex="-1"><a class="header-anchor" href="#四-移除事件-off"><span>四.移除事件 - off</span></a></h3><h3 id="五-实例方法" tabindex="-1"><a class="header-anchor" href="#五-实例方法"><span>五.实例方法</span></a></h3><h4 id="_1-设置地图层级-setzoom" tabindex="-1"><a class="header-anchor" href="#_1-设置地图层级-setzoom"><span>1.设置地图层级 setZoom</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setZoom</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>另外一种写法，带动画过渡效果</p><!----><ul><li><!----><!----></li><li><!----></li><li><!----></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setZoom</span><span class="token punctuation">(</span><span class="token number">16.5</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-设置地图中心点-setcenter" tabindex="-1"><a class="header-anchor" href="#_2-设置地图中心点-setcenter"><span>2.设置地图中心点 setCenter</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>lng<span class="token punctuation">,</span> lat<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>另外一种写法，带动画过渡效果</p><!----><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>LngLat</span><span class="token punctuation">(</span><span class="token number">117.101009</span><span class="token punctuation">,</span><span class="token number">36.562788</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">3500</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!----><h4 id="_3-同时设置地图层级与中心点-setzoomandcenter" tabindex="-1"><a class="header-anchor" href="#_3-同时设置地图层级与中心点-setzoomandcenter"><span>3.同时设置地图层级与中心点 setZoomAndCenter</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setZoomAndCenter</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> <span class="token punctuation">[</span>lng<span class="token punctuation">,</span> lat<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_4-设置-更改城市-setcity" tabindex="-1"><a class="header-anchor" href="#_4-设置-更改城市-setcity"><span>4.设置/更改城市 setCity</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span><span class="token string">&quot;郑州&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_5-获取当前城市-getcity" tabindex="-1"><a class="header-anchor" href="#_5-获取当前城市-getcity"><span>5.获取当前城市 getCity</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">getCity</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// info:{&quot;province&quot;:&quot;北京市&quot;,&quot;city&quot;:&quot;&quot;,&quot;citycode&quot;:&quot;010&quot;,&quot;district&quot;:&quot;西城区&quot;}</span></span>
<span class="line">  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-获取地图边界-getbounds" tabindex="-1"><a class="header-anchor" href="#_6-获取地图边界-getbounds"><span>6.获取地图边界 getBounds</span></a></h4><p>返回地图 2个坐标，表示地图矩形边界</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> bounds <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// northEast，southWest</span></span>
<span class="line">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#ne&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> bounds<span class="token punctuation">.</span>northEast<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#sw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> bounds<span class="token punctuation">.</span>southWest<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-设置地图边界-setbounds" tabindex="-1"><a class="header-anchor" href="#_7-设置地图边界-setbounds"><span>7.设置地图边界 setBounds</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> mybounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Bounds</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">116.319665</span><span class="token punctuation">,</span> <span class="token number">39.855919</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">116.468324</span><span class="token punctuation">,</span><span class="token number">39.9756</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setBounds</span><span class="token punctuation">(</span>mybounds<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-限制地图的显示范围-setlimitbounds" tabindex="-1"><a class="header-anchor" href="#_8-限制地图的显示范围-setlimitbounds"><span>8.限制地图的显示范围 setLimitBounds</span></a></h4><p>限制显示范围后，移动地图会有限制，不能自由移动</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> bounds <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setLimitBounds</span><span class="token punctuation">(</span>bounds<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-地图平移-panby-panto" tabindex="-1"><a class="header-anchor" href="#_9-地图平移-panby-panto"><span>9.地图平移 panBy | panTo</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 平移像素值（正向左|负向右，正向上|负向下）</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">panBy</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// panTo移动到指定位置</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">panTo</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">116.405467</span><span class="token punctuation">,</span> <span class="token number">39.907761</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_10-设置鼠标样式-setdefaultcursor" tabindex="-1"><a class="header-anchor" href="#_10-设置鼠标样式-setdefaultcursor"><span>10.设置鼠标样式 setDefaultCursor</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setDefaultCursor</span><span class="token punctuation">(</span><span class="token string">&quot;pointer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_11-获取当前地图级别-getzoom" tabindex="-1"><a class="header-anchor" href="#_11-获取当前地图级别-getzoom"><span>11.获取当前地图级别 getZoom</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> zoom <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getZoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_12-获取当前地图中心位置-getcenter" tabindex="-1"><a class="header-anchor" href="#_12-获取当前地图中心位置-getcenter"><span>12.获取当前地图中心位置 getCenter</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> center <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_13-自动平移到中心位置-setfitview" tabindex="-1"><a class="header-anchor" href="#_13-自动平移到中心位置-setfitview"><span>13.自动平移到中心位置 setFitView</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setFitView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_14-设置地图样式-setmapstyle" tabindex="-1"><a class="header-anchor" href="#_14-设置地图样式-setmapstyle"><span>14.设置地图样式 setMapStyle</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&#39;amap://styles/dark&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 夜间黑色</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/light&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 月光银</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/whitesmoke&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 远山黛</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/fresh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 草色青</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/grey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//  雅士灰</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/macaron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 马卡龙</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/blue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 靛青蓝</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/darkblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//极夜蓝</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setMapStyle</span><span class="token punctuation">(</span><span class="token string">&quot;amap://styles/wine&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//酱籽</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-设置地图要素-setfeatures" tabindex="-1"><a class="header-anchor" href="#_15-设置地图要素-setfeatures"><span>15.设置地图要素 setFeatures</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">setFeatures</span><span class="token punctuation">(</span>  <span class="token punctuation">[</span><span class="token string">&#39;bg&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;road&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;building&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;point&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_16-销毁地图-destroy" tabindex="-1"><a class="header-anchor" href="#_16-销毁地图-destroy"><span>16.销毁地图 destroy</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="六-覆盖物遮罩添加" tabindex="-1"><a class="header-anchor" href="#六-覆盖物遮罩添加"><span>六.覆盖物遮罩添加</span></a></h3><h4 id="_1-点坐标图添加" tabindex="-1"><a class="header-anchor" href="#_1-点坐标图添加"><span>1.点坐标图添加</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> marker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Marker</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">116.405467</span><span class="token punctuation">,</span> <span class="token number">39.907761</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">anchor</span><span class="token operator">:</span><span class="token string">&#39;bottom-center&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 添加遮罩</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>marker<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-构造矢量圆形" tabindex="-1"><a class="header-anchor" href="#_2-构造矢量圆形"><span>2.构造矢量圆形</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>LngLat</span><span class="token punctuation">(</span><span class="token string">&quot;116.403322&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;39.920255&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 圆心位置</span></span>
<span class="line">  <span class="token literal-property property">radius</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>  <span class="token comment">//半径</span></span>
<span class="line">  <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token string">&quot;#F33&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//线颜色</span></span>
<span class="line">  <span class="token literal-property property">strokeOpacity</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">//线透明度</span></span>
<span class="line">  <span class="token literal-property property">strokeWeight</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment">//线粗细度</span></span>
<span class="line">  <span class="token literal-property property">fillColor</span><span class="token operator">:</span> <span class="token string">&quot;#ee2200&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//填充颜色</span></span>
<span class="line">  <span class="token literal-property property">fillOpacity</span><span class="token operator">:</span> <span class="token number">0.35</span> <span class="token comment">//填充透明度</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 添加</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了Marker，Circle</p><h3 id="七-图层添加" tabindex="-1"><a class="header-anchor" href="#七-图层添加"><span>七.图层添加</span></a></h3><h4 id="_1-高德默认图层" tabindex="-1"><a class="header-anchor" href="#_1-高德默认图层"><span>1.高德默认图层</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">116.397428</span><span class="token punctuation">,</span> <span class="token number">39.90923</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">layers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token comment">//只显示默认图层的时候，layers可以缺省</span></span>
<span class="line">    AMap<span class="token punctuation">.</span><span class="token function">createDefaultLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//高德默认标准图层</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">13</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-卫星图层-satellite" tabindex="-1"><a class="header-anchor" href="#_2-卫星图层-satellite"><span>2.卫星图层 Satellite</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> satelliteLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>TileLayer<span class="token punctuation">.</span>Satellite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>satelliteLayer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-路网图层-roadnet" tabindex="-1"><a class="header-anchor" href="#_3-路网图层-roadnet"><span>3.路网图层 RoadNet</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> roadNetLayer <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>TileLayer<span class="token punctuation">.</span>RoadNet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>roadNetLayer <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-交通图层-traffic" tabindex="-1"><a class="header-anchor" href="#_4-交通图层-traffic"><span>4.交通图层 Traffic</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> trafficLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>TileLayer<span class="token punctuation">.</span>Traffic</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> trafficLayer  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="八-控件添加" tabindex="-1"><a class="header-anchor" href="#八-控件添加"><span>八.控件添加</span></a></h3><h4 id="_1-组合了旋转、倾斜、复位、缩放在内的地图控件-controlbar" tabindex="-1"><a class="header-anchor" href="#_1-组合了旋转、倾斜、复位、缩放在内的地图控件-controlbar"><span>1.组合了旋转、倾斜、复位、缩放在内的地图控件 ControlBar</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> controlBar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>ControlBar</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span>controlBar<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-加载工具条-toolbar" tabindex="-1"><a class="header-anchor" href="#_2-加载工具条-toolbar"><span>2.加载工具条 ToolBar</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> tool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>ToolBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mapObj<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span>tool<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-比例尺插件-scale" tabindex="-1"><a class="header-anchor" href="#_3-比例尺插件-scale"><span>3.比例尺插件  Scale</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span> scale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>Scale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-地图鹰眼插件-默认在地图右下角显示缩略图-hawkeye" tabindex="-1"><a class="header-anchor" href="#_4-地图鹰眼插件-默认在地图右下角显示缩略图-hawkeye"><span>4.地图鹰眼插件，默认在地图右下角显示缩略图  HawkEye</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">var</span>  overView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>HawkEye</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">opened</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span>overView <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="九-jsapi-加载器" tabindex="-1"><a class="header-anchor" href="#九-jsapi-加载器"><span>九.JSAPI 加载器</span></a></h3><p>可以避免异步加载、重复加载等常见错误加载错误。<br> 引入 @amap/amap-jsapi-loader 文件</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">AMapLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">  <span class="token comment">// map key</span></span>
<span class="line">  <span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">&#39;608d75903d29ad471362f8c58c550daf&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 版本号</span></span>
<span class="line">  <span class="token literal-property property">version</span><span class="token operator">:</span><span class="token string">&#39;2.0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 插件</span></span>
<span class="line">  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;AMap.MapType&#39;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">AMap</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 回调，用于初始化插件</span></span>
<span class="line">  map<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>MapType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="十-显示地图参数信息" tabindex="-1"><a class="header-anchor" href="#十-显示地图参数信息"><span>十.显示地图参数信息</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">new</span> <span class="token class-name">PrettyJSON<span class="token punctuation">.</span>view<span class="token punctuation">.</span>Node</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">el</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#map-status&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">data</span><span class="token operator">:</span> mapOpts</span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="异常处理记录" tabindex="-1"><a class="header-anchor" href="#异常处理记录"><span>异常处理记录</span></a></h2><h4 id="_1-amap-多标签页面切换导致内存泄露问题" tabindex="-1"><a class="header-anchor" href="#_1-amap-多标签页面切换导致内存泄露问题"><span>1.amap 多标签页面切换导致内存泄露问题</span></a></h4><p>解决办法：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token function-variable function">beforeDestroy</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//此处是获取高德生成的地图画布canvas元素，其他方式亦可</span></span>
<span class="line">    <span class="token keyword">var</span> gl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;webgl&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//监听上下文丢失-可不添加。</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;webglcontextlost&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//丢失上下文的方法</span></span>
<span class="line">    gl<span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span><span class="token string">&#39;WEBGL_lose_context&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loseContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  </span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 地图图块加载完成后触发</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;complete&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 避免销毁时获取不到canvas</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;canvas.amap-layer&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated:: </span><time class="meta-item-info" datetime="2025-07-31T09:48:22.000Z" data-allow-mismatch>7/31/25, 5:48 PM</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 35548612+GHchenjingqi@users.noreply.github.com">GHchenjingqi</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/md/assets/app-Bq68UBLY.js" defer></script>
  </body>
</html>
